# Get editor completions based on the config schema
"$schema" = 'https://starship.rs/config-schema.json'

# Inserts a blank line between shell prompts
add_newline = true

# Use custom format
format = """
[â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>](dimmed white)
[â”‚](dimmed white)\
[ î‚¶](#9A348E)$username$sudo$os$hostname${custom.ssh_no_keys}${custom.ssh_keys}[î‚¼](#9A348E bg:#DA627D)\
$shell${custom.zsh-version}$shlvl${custom.zsh-history}[î‚¼](#DA627D bg:#FCA17D)\
$directory${custom.folder_number}${custom.file_number}${custom.link_number}[î‚¼](#FCA17D bg:#86BBD8)\
${custom.giturl}$git_branch$git_commit$git_state${custom.git_scope}[î‚¼](#86BBD8 bg:#06969A)\
$git_metrics$git_status[î‚´](#06969A)\
$package\
[ ]()$fill\
$battery$status$jobs${custom.home-dirty}$fill\
$c$cmake$golang$haskell$julia${custom.luaenv}$nim$nodejs${custom.plenv}${custom.pyenv}${custom.rbenv}$rust$zig$nix_shell${custom.conda_env}\
[â”€\\[ ](dimmed white)$cmd_duration[â”€](dimmed white)$time[ \\]â”€â”](dimmed white)\
$line_break\
[â””â”€](dimmed white)$character"""
right_format = """[ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  ](dimmed white)"""

scan_timeout = 300
command_timeout = 1500

[username]
format = "[$user ]($style)"
style_root = "yellow bold bg:#9A348E"
style_user = "bright-white bg:#9A348E"
show_always = true

[sudo]
disabled = false
style = "bright-white bg:#9A348E"
format = "[as$symbol]($style)"
symbol = "ğŸ§™ "

[os]
disabled = false
format = "[$symbol ]($style)"
style = "bold bright-white bg:#9A348E"

[hostname]
format = "[$hostname( via $ssh_symbol) ]($style)"
ssh_symbol = "î¬ "
ssh_only = false
style = "bright-white bg:#9A348E"

[custom.ssh_no_keys]
description = "SSH missing keys"
when = "ssh-add -l | grep -q 'no identities'"
command = "echo ğŸš«"
format = "[$symbol$output ]($style)"
shell = ["bash", "--noprofile", "--norc"]
symbol = "ğŸ”‘"
style = "bold fg:#DA627D bg:#9A348E"

[custom.ssh_keys]
description = "SSH key count"
when = "ssh-add -l | grep -v -q 'no identities'"
command = "ssh-add -l | grep -v 'no identities' | wc -l"
format = "[$symbol$output ]($style)"
shell = ["bash", "--noprofile", "--norc"]
symbol = "ğŸ”‘"
style = "bright-white bg:#9A348E"

[shell]
zsh_indicator = "ğŸš€"
bash_indicator = " î• bash"
unknown_indicator = "î•  ï™"
format = "[$indicator ]($style)"
disabled = false
style = "bright-white bg:#DA627D"

[custom.zsh-history]
description = "The number of history commands."
format = "[ï‘¤ $output ]($style)"
style = "bright-white bg:#DA627D"
when = true
command = "wc -l <$HISTFILE"
# command = "echo %!"
shell = ["bash", "--noprofile", "--norc"]

[custom.zsh-version]
description = "The version of ZSH."
format = "[($output )]($style)"
style = "bright-white bg:#DA627D"
when = "[[ $SHELL = *zsh ]]"
command = "echo $ZSH_VERSION"
shell = ["zsh", "-f"]

[shlvl]
format = "[$symbol $shlvl ]($style)"
style = "bright-white bg:#DA627D"
symbol = "ï”"
threshold = 1
disabled = false

[directory]
read_only = "ó°Œ¾"
fish_style_pwd_dir_length = 2
repo_root_format = "[($read_only)]($read_only_style)[ $before_root_path]($before_repo_root_style)[$repo_root]($repo_root_style)[$path](bold $style)"
before_repo_root_style = "dimmed bright-black bg:#FCA17D"
repo_root_style = "bright-black bg:#FCA17D"
format = "[( $read_only)]($read_only_style)[ $path]($style)"
style = "black bg:#FCA17D"
read_only_style = "#DA627D bg:#FCA17D"

[custom.link_number]
command = "find . -maxdepth 1 -type l | wc -l"
when = """[[ -n "$(find . -maxdepth 1 -type l)" ]]"""
symbol = "ó±…· "
description = "Number of symbol links in the current working directory"
format = '[$symbol$output ]($style)'
style = "black bg:#FCA17D"

[custom.file_number]
command = "find . -maxdepth 1 -type f -not -name '.DS_Store' | wc -l"
when = true
symbol = "ïƒ… "
description = "Number of files in the current working directory"
format = '[$symbol$output ]($style)'
style = "black bg:#FCA17D"

[custom.folder_number]
command = "find . -maxdepth 1 -type d -not -name '.git' -not -name '.' | wc -l"
when = true
symbol = "ó°‰• "
description = "Number of folders in the current working directory"
format = '[ $symbol$output ]($style)'
style = "black bg:#FCA17D"

[custom.giturl]
# disabled = true
description = "Display symbol for remote Git server"
command = """
GIT_REMOTE=$(command git ls-remote --get-url 2> /dev/null)
if [[ "$GIT_REMOTE" =~ "github" ]]; then
    GIT_REMOTE_SYMBOL="ïˆ "
elif [[ "$GIT_REMOTE" =~ "gitlab" ]]; then
    GIT_REMOTE_SYMBOL="ïŠ– "
elif [[ "$GIT_REMOTE" =~ "bitbucket" ]]; then
    GIT_REMOTE_SYMBOL="ï…± "
elif [[ "$GIT_REMOTE" =~ "git" ]]; then
    GIT_REMOTE_SYMBOL="ó°Š¢ "
else
    GIT_REMOTE_SYMBOL="ï‡“ "
fi
echo "$GIT_REMOTE_SYMBOL"
"""
when = 'git rev-parse --is-inside-work-tree 2>/dev/null'
format = "[ on $output ]($style)"
style = "bright-white bg:#86BBD8"

[git_branch]
format = "[$branch(:$remote_branch) ]($style)"
style = "bright-white bg:#86BBD8"

[git_commit]
format = "[\\($hash(|$tag)\\) ]($style)"
tag_disabled = false
style = "bright-white bg:#86BBD8"

[git_state]
format = '\([$state( $progress_current/$progress_total) ]($style)\)'
style = "bright-white bg:#86BBD8"

[custom.git_scope]
command = '''
if [ -z "$GIT_AUTHOR_EMAIL" ]; then GIT_AUTHOR_EMAIL=$(git config --local user.email 2>/dev/null); fi
# if [ -z "$GIT_AUTHOR_NAME" ]; then GIT_AUTHOR_NAME=$(git config --local user.name 2>/dev/null); fi
if [ -z "$GIT_AUTHOR_NAME" ]; then GIT_AUTHOR_NAME=$(git config user.name 2>/dev/null); fi
# if [ -n "$GIT_AUTHOR_EMAIL" ] || [ -n "$GIT_AUTHOR_NAME" ]; then printf "as ${GIT_AUTHOR_EMAIL:-$(git config user.email 2>/dev/null)}(${GIT_AUTHOR_NAME:-$(git config user.name 2>/dev/null)})" ; fi
if [ -n "$GIT_AUTHOR_EMAIL" ]; then
    printf "as $GIT_AUTHOR_EMAIL($GIT_AUTHOR_NAME)"
else
    printf "as $GIT_AUTHOR_NAME"
fi
'''
description = 'The current local Git user.{email,name}'
format = '[($output )]($style)'
shell = ["sh"]
style = "bright-white bg:#86BBD8"
when = 'git rev-parse --is-inside-work-tree'

[git_metrics]
disabled = false
format = "[ ](bg:#06969A)[(+$added )]($added_style)[(-$deleted )]($deleted_style)"
added_style = "bright-green bg:#06969A"
deleted_style = "bright-red bg:#06969A"

[git_status]
format = '([\[$all_status$ahead_behind\] ]($style))'
style = "bright-white bg:#06969A"
conflicted = "$count="
ahead = "$countâ‡¡"
behind = "$countâ‡£"
diverged = "â‡•"
up_to_date = ""
untracked = "$count?"
stashed = "$count$"
modified = "$count!!"
staged = "$count+"
renamed = "$countÂ»"
deleted = "$countâœ˜"
typechanged = ""

[fill]
symbol = "â”€"
style = "dimmed white"
# symbol = "Â·"

# https://github.com/starship/starship/discussions/1252
# [custom.gitautofetch]
# description = "Display status of ohmyzsh git-auto-fetch plugin"
# # guard from https://github.com/ohmyzsh/ohmyzsh/blob/706b2f3765d41bee2853b17724888d1a3f6f00d9/plugins/git-auto-fetch/git-auto-fetch.plugin.zsh#L37
# command = """
# if [[ -f "$(command git rev-parse --git-dir)/NO_AUTO_FETCH" ]]; then
#     printf ""
# else
#     printf "ó±¾ "
# fi
# """
# style = 'red'
# shell = ["bash","--norc","--noprofile"]
# when = 'git rev-parse --is-inside-work-tree 2> /dev/null'
#
# [custom.df]
# command = 'df -h --output=pcent,avail $PWD | tail -n 1 | awk '{print $1 "," $2}''
# when = "true"
# shell = ["bash", "--noprofile", "--norc"]
# symbol = "ï‚ "
# format = "[$symbol ($output)]($style) "
# style = "bright-blue"
#
# [custom.gpu]
# command = 'nvidia-smi --query-gpu=utilization.gpu --format=csv,noheader,nounits'
# description = 'The usage rate of the NVIDIA GPU'
# when = ' type nvidia-smi '
# format = '$symbol [$output%]($style) '
# style = 'bold blue'
# symbol = 'GPU'

[cmake]
# #0068C7 #F32735 #3DAE2B #003764 #DCE3EB
format = " [î‚¶](#0068C7)[CMake](bold #DCE3EB bg:#0068C7)[î‚¼](#0068C7 bg:#3DAE2B)[$symbol](#003764 bg:#3DAE2B)[î‚¾](bg:#3DAE2B #F32735)[( $version )]($style)[î‚´](#F32735) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #003764 bg:#F32735"
symbol = "â–³"

# [aws]
# symbol = "îŒ½  "
#
# [buf]
# symbol = "ï’ "

[c]
format = " [î‚¶](#FFFFFF)[C]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#055A9D) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #FFFFFF bg:#055A9D"
symbol = "î˜ "

# [crystal]
# symbol = "î˜¯ "
#
# [dart]
# symbol = "î˜ "

# [elixir]
# symbol = "î˜­ "
#
# [elm]
# symbol = "î˜¬ "
#
# [fennel]
# symbol = "îš¯ "

# [fossil_branch]
# symbol = "ï˜ "

[golang]
format = " [î‚¶](#FFFFFF)[GO]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#007D9C) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #FFFFFF bg:#007D9C"
not_capable_style = "bold #FDDD00 bg:#007D9C"
symbol = "î˜§ "

# [guix_shell]
# symbol = "ïŒ¥ "

[haskell]
format = " [î‚¶](#000000)[Haskell]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#5E5086) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #000000 bg:#5E5086"
symbol = "î· "

# [haxe]
# symbol = "î™¦ "
#
# [hg_branch]
# symbol = "ï˜ "
#
# [java]
# symbol = "î‰– "

[julia]
# #CB3C33 #4063D8 #9558B2 #389826
format = " [î‚¶](#4063D8)[julia]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#389826) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #4063D8 bg:#389826"
symbol = "î˜¤ "

# [kotlin]
# symbol = "î˜´ "

[custom.luaenv]
description = "Print Lua version."
format = " [î‚¶](#FFFFFF)[Lua]($style inverted)[î‚¼ $symbol($output )]($style)[î‚´](#00007F) [â”€](dimmed white)"
when = """[ -n "$LUAENV_VERSION" ] || [ "$(luaenv version-file)" != "$LUAENV_ROOT/version" ]"""
style = "bold #FFFFFF bg:#00007F"
symbol = "î˜  "
command = """
if [ -n "$LUAENV_VERSION" ]; then
    echo $LUAENV_VERSION
else
    cat $(luaenv version-file)
fi
"""
detect_extensions = [ "lua" ]
detect_files = [ ".lua-version" ]
detect_folders = [ "lua" ]

# [lua]
# format = " [î‚¶](#FFFFFF)[Lua]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#00007F) [â”€](dimmed white)"
# version_format = "v$raw"
# style = "bold #FFFFFF bg:#00007F"
# symbol = "î˜  "

# [memory_usage]
# symbol = "ó°› "
#
# [meson]
# symbol = "ó°”· "

[nim]
format = " [î‚¶](#FFFFFF dimmed)[nim]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#F3E853) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold dimmed #FFFFFF bg:#F3E853"
symbol = "ó°†¥ "

[nix_shell]
format = ' [î‚¶](#5175C0)[Nix](bold #FFFFFF bg:#5175C0)[î‚¼](#5175C0 bg:#7EBAE4)[ $symbol$state( \($name\))](bold #FFFFFF bg:#7EBAE4)[î‚´](#7EBAE4) [â”€](dimmed white)'
symbol = "ïŒ“ "

[nodejs]
format = " [î‚¶](#303030)[Node.js]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#68A063) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #303030 bg:#68A063"
not_capable_style = "bold red bg:#68A063"
symbol = "îœ˜ "

# [ocaml]
# symbol = "î™º "

[package]
format = " [$symbol$version]($style) "
version_format = "v$raw"
style = "208 bold"
symbol = "ó°— "

# [perl]
# format = " [î‚¶](#61C5BA)[Perl]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#0073A1) [â”€](dimmed white)"
# version_format = "v$raw"
# style = "bold bg:#0073A1 #61C5BA"
# symbol = "î™¾ "

[custom.plenv]
description = "Print plenv Perl version."
format = " [î‚¶](#61C5BA)[Perl]($style inverted)[î‚¼ $symbol($output )]($style)[î‚´](#0073A1) [â”€](dimmed white)"
when = """[ -n "$PLENV_VERSION" ] || [ "$(plenv version-file)" != "$PLENV_ROOT/version" ]"""
style = "bold bg:#0073A1 #61C5BA"
symbol = "î™¾ "
command = """
if [ -n "$PLENV_VERSION" ]; then
    echo $PLENV_VERSION
else
    echo $(plenv version-name)
fi
"""
detect_extensions = [ "pl", "pm", "pod" ]
detect_files = [ "Makefile.PL", "Build.PL", "cpanfile", "cpanfile.snapshot", "META.json", "META.yml", ".perl-version" ]

# [php]
# symbol = "î˜ˆ "
#
# [pijul_channel]
# symbol = "ï˜ "

[custom.pyenv]
description = "Print Python version."
format = ' [î‚¶](#306998)[Python]($style inverted)[î‚¼ $symbol($output )]($style)[î‚´](#FFD43B) [â”€](dimmed white)'
when = """[ -n "$PYENV_VERSION" ] || [ "$(pyenv version-file)" != "$PYENV_ROOT/version" ]"""
style = "#306998 bg:#FFD43B bold"
symbol = "îˆµ "
command = """
if [ -n "$PYENV_VERSION" ]; then
    echo $PYENV_VERSION
else
    echo $(pyenv version-name)
fi
"""
detect_files = [ "requirements.txt", ".python-version", "pyproject.toml", "Pipfile", "tox.ini", "setup.py", "__init__.py" ]
detect_extensions = [ "py" ]

# [python]
# format = ' [î‚¶](#306998)[Python]($style inverted)[î‚¼ $symbol$pyenv_prefix($version )(\($virtualenv\) )]($style)[î‚´](#FFD43B) [â”€](dimmed white)'
# pyenv_prefix = "pyenv "
# version_format = "v$raw"
# pyenv_version_name = true
# style = "#306998 bg:#FFD43B bold"
# symbol = "îˆµ "

# [rlang]
# symbol = "ó°Ÿ” "

[custom.rbenv]
description = "Print Ruby version."
format = " [î‚¶](#101010)[Ruby]($style inverted)[î‚¼ $symbol($output )]($style)[î‚´](#CC342D) [â”€](dimmed white)"
when = """[ -n "$RBENV_VERSION" ] || [ "$(rbenv version-file)" != "$RBENV_ROOT/version" ]"""
style = "bold fg:#101010 bg:#CC342D"
symbol = "î‘ "
command = """
if [ -n "$RBENV_VERSION" ]; then
    echo $RBENV_VERSION
else
    echo $(rbenv version-name)
fi
"""
detect_extensions = [ "rb" ]
detect_files = [ "Gemfile", ".ruby-version" ]
shell = ["sh"]

# [ruby] # laggy; > 500ms
# format = " [î‚¶](#000000)[Ruby]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#CC342D) [â”€](dimmed white)"
# version_format = "v$raw"
# style = "bold #000000 bg:#CC342D"
# symbol = "î‘ "

[rust]
format = " [î‚¶](#FFFFFF)[Rust]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#000000) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #FFFFFF bg:#000000"
symbol = "î¨ "

# [scala]
# symbol = "îœ· "
#
# [swift]
# symbol = "î• "

[zig]
format = " [î‚¶](#000000)[Zig]($style inverted)[î‚¼ $symbol($version )]($style)[î‚´](#F7A41D) [â”€](dimmed white)"
version_format = "v$raw"
style = "bold #000000 bg:#F7A41D"
symbol = "îš© "

[custom.conda_env]
description = "Print activated (Ana/Mini)Conda/(Micro)Mamba envs."
format = " [î‚¶](#FFFFFF)[Conda]($style inverted)[î‚¼ $symbol($output )]($style)[î‚´](#43B02A) [â”€](dimmed white)"
when = """[ -n "$CONDA_PROMPT_MODIFIER" ]"""
style = "bold fg:#FFFFFF bg:#43B02A"
symbol = "ó±” "
command = '''
echo $([[ "$CONDA_PROMPT_MODIFIER" =~ ^[[:space:]]*\((.*)\)[[:space:]]*$ ]] && printf "${BASH_REMATCH[1]}") | sed -E 's/;|,/ î‚» /'
'''
shell = ["bash", "--norc", "--noprofile"]

[time]
format = "at [$time]($style)"
disabled = false

[cmd_duration]
format = "took [$duration]($style)"
min_time = 1
show_milliseconds = true
show_notifications = true

# line_break

[jobs]
format = "[$symbol$number]($style)[â”€](dimmed white)"
symbol = "âœ¦ "
style = "bold blue"
threshold = 1
symbol_threshold = 1
number_threshold = 1

[battery]
format = "[$symbol$percentage]($style)[â”€](dimmed white)"
full_symbol = "ó°¹ "
charging_symbol = "ó°‚„ "
discharging_symbol = "ó°‚ƒ "
unknown_symbol = "ó°½ "
empty_symbol = "ó°‚ "

[[battery.display]]
threshold = 90

[status]
format = "[$symbol $status]($style)[â”€](dimmed white)"
symbol = "âŒ"
style = "bold red"
disabled = false
pipestatus = true

[custom.home-dirty]
description = "Check if home directory is dirty."
format = '[($output)]($style)[â”€](dimmed white)'
when = true
command = """
ret=""
for i in $(command ls -A $HOME); do
    case $i in
        .bash_logout);;
        .bash_profile);;
        .bashrc);;
        .cache);;
        .conda);;
        .config);;
        .docker);; # ~/.docker/desktop/log/host/docker-desktop.log
        .local);;
        .ollama);; # ~/.ollama/history ~/.ollama/id_ed25519.pub
        .pcsc10);;
        .profile);;
        .sos);;
        .ssh);;
        .sudo_as_admin_successful);;
        .xsessionrc);;
        .zshenv);;
        My);;
        *)
            ret+=" $i";;
    esac
done
if [ -n "$ret" ]; then
    echo "ó°¡» $ret"
fi
unset ret
"""
shell = ["bash", "--noprofile", "--norc"]

[os.symbols]
Alpaquita = "îª¢"
Alpine = "ïŒ€"
AlmaLinux = "ïŒ"
Amazon = "ï‰°"
Android = "ï…»"
Arch = "ïŒƒ"
Artix = "ïŒŸ"
CentOS = "ïŒ„"
Debian = "ïŒ†"
DragonFly = "îŠ"
Emscripten = "ïˆ…"
EndeavourOS = "ï†—"
Fedora = "ïŒŠ"
FreeBSD = "ïŒŒ"
Garuda = "ó°›“"
Gentoo = "ïŒ"
HardenedBSD = "ó°Œ"
Illumos = "ó°ˆ¸"
Kali = "ïŒ§"
Linux = "ïŒš"
Mabox = "î¬©"
Macos = "ïŒ‚"
Manjaro = "ïŒ’"
Mariner = "ï‡"
MidnightBSD = "ï††"
Mint = "ïŒ"
NetBSD = "ï€¤"
NixOS = "ïŒ“"
OpenBSD = "ó°ˆº"
openSUSE = "ïŒ”"
OracleLinux = "ó°Œ·"
Pop = "ïŒª"
Raspbian = "ïŒ•"
Redhat = "ïŒ–"
RedHatEnterprise = "ïŒ–"
RockyLinux = "ïŒ«"
Redox = "ó°€˜"
Solus = "ó° ³"
SUSE = "ïŒ”"
Ubuntu = "ïŒ›"
Unknown = "ïˆ­"
Void = "ïŒ®"
Windows = "ó°²"

# Replace the 'â¯' symbol in the prompt with 'âœ'
[character] # The name of the module we are configuring is 'character'
success_symbol = '[â¯](bold green)' # The 'success_symbol' segment is being set to 'âœ' with the color 'bold green'
